{"version":3,"file":"file.min.js","sources":["../src/file.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * Coodle todo Event functions\n * @package    local_coodle\n * @copyright  Wunderbyte GmbH <info@wunderbyte.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\n\n/**\n * Defines dataset Actions\n */\nconst ACTIONS = {\n    DELETE: 'local-coodle-delete-file',\n};\n\n/**\n * Initialize function\n *\n * @param {int} id\n */\nexport const init = (id) => {\n    console.log(id);\n    initEventListener(id);\n};\n\n/**\n * Add eventlistener for Actions\n * @param {*} id\n */\nconst initEventListener = (id) => {\n    document.getElementById(id).addEventListener('click', function(e) {\n        let target = e.target;\n        // eslint-disable-next-line no-console\n        console.log(target.dataset.action);\n        if (!target.dataset.action) {\n\n            return;\n        }\n        switch (target.dataset.action) {\n            case ACTIONS.DELETE:\n                fileDelete(target, target.dataset.id);\n                break;\n            default:\n                break;\n        }\n    });\n};\n\n\n/**\n * Deletes a file\n * @param {EventTarget} target the id of the todo\n * @param {Integer} id the id of the todo\n */\nconst fileDelete = (target, id) => {\n    // TODO: modal question?\n    Ajax.call([{\n        methodname: \"local_coodle_delete_file\",\n        args: {\n            'fileid': parseInt(id),\n        },\n        done: function() {\n            target.closest('li').remove();\n        },\n        fail: function(ex) {\n            // eslint-disable-next-line no-console\n            console.log(\"ex:\" + ex);\n        },\n    }]);\n};\n"],"names":["ACTIONS","id","console","log","initEventListener","document","getElementById","addEventListener","e","target","dataset","action","fileDelete","call","methodname","args","parseInt","done","closest","remove","fail","ex"],"mappings":";;;;;;4IA2BMA,eACM,yCAQSC,KACjBC,QAAQC,IAAIF,IACZG,kBAAkBH,WAOhBG,kBAAqBH,KACvBI,SAASC,eAAeL,IAAIM,iBAAiB,SAAS,SAASC,OACvDC,OAASD,EAAEC,UAEfP,QAAQC,IAAIM,OAAOC,QAAQC,QACtBF,OAAOC,QAAQC,QAIZF,OAAOC,QAAQC,SACdX,eACDY,WAAWH,OAAQA,OAAOC,QAAQT,QAc5CW,WAAa,CAACH,OAAQR,oBAEnBY,KAAK,CAAC,CACPC,WAAY,2BACZC,KAAM,QACQC,SAASf,KAEvBgB,KAAM,WACFR,OAAOS,QAAQ,MAAMC,UAEzBC,KAAM,SAASC,IAEXnB,QAAQC,IAAI,MAAQkB"}